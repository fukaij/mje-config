#eval compdef -n _files em
# ZSH function file
# Send files to emacs for editing
# Usage: em <file> ...
#
# $Id: em,v 1.3 2001/05/03 11:20:16 mebourne Exp $

local files
files=($*)

if (( $#files ))
then
#  # Loop through files individually rather than sending as one block - that way
#  # they all end up at the top of the buffer stack in Emacs, not all except one
#  # being on the bottom
#  local file
#  for file in $files
#  do
#    emacsclient --no-wait $file
#  done

  # For now pass all in one go. Two problems with above, (i) it buggers up
  # with clearcase files, (ii) it may be responsible for 'too many client'
  # errors
  emacsclient --no-wait $files
else
  echo "Syntax: em <file> ..." 1>&2
  return 1
fi
