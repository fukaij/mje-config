# ZSH configuration file
# Executed when the SQL base package is included
# Setup for SQL base package
# Written by Martin Ebourne
#
# $Id: setup,v 1.10 2001/08/09 13:25:05 mebourne Exp $

add_functions_directory package/sql/base/functions

typeset -gA _sql_parameters _sql_functions

# This header is to be eval'd at the start of each entry function for
# consistent setup
typeset -g _sql_intro='
emulate -L zsh
'

# Setup for SQL output formatting Perl script
typeset -g _sql_formatprogram=sqlFormat.pl
compdef -n _parse_opts ${_sql_formatprogram:t}

# Bind special keys for SQL quoting
zle -N sql_quote _sql_quote
zle -N sql_quote_line _sql_quote_line
bindkey "\'" sql_quote
bindkey "^Xq" sql_quote_line

# This is an ignored command, just used as a hint to the SQL widget functions
alias quoted=""

# These are user commands. Quoted must come first where applicable
alias sql="quoted nocorrect noglob sql"
alias desc="quoted nocorrect noglob desc"
alias ssf="sql select * from"
alias scsf="sql select count(*) \'Rows\' from"
alias select="sql select"

# Options defaults
# count    - Print count of number of rows returned (or affected)
# maxrows  - Maximum number of rows to return. 0 for no maximum
# format   - Select output type for SQL formatting. Values are:
#	     none   - Formatting completely disabled
#	     simple - Simple formatting keeping the default output style
#            squash - As simple but reduces column widths to save on screen space
#            bcp    - BCP compatible output, tab separated columns with no header
#	     record - Record style output, row by row
#	     emacs  - Emacs style output
# colour   - Colour displayed data based on context (default based on $COLOUR).
#	     NB. This parameter will only have effect if formatting is enabled
sqlset count=1 maxrows=0 format=squash colour="${COLOUR:-0}"
