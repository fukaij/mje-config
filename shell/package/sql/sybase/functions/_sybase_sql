# ZSH function file
# Part of the SQL Sybase package
# Execute the given SQL command
# For use only by the SQL packages
#
# $Id: _sybase_sql,v 1.2 2001/03/01 11:16:51 mebourne Exp $

if [[ -n $1 ]]
then
  {
    if [[ -n $_sql_parameters[database] ]]
    then
      echo "use $_sql_parameters[database]"
      echo "go"
    fi

    if [[ -n $rows ]]
    then
      echo "set rowcount $rows"
      echo "go"
    elif [[ -n $_sql_parameters[maxrows] ]]
    then
      echo "set rowcount $_sql_parameters[maxrows]"
      echo "go"
    fi

    if [[ -n $nocount ]]
    then
      echo "set nocount on"
      echo "go"
    elif [[ -n $_sql_parameters[nocount] ]]
    then
      echo "set nocount on"
      echo "go"
    fi

    echo "$*"
    echo "go"
  } | _sybase_rawsql -w 10000
else
  _sybase_rawsql
fi
