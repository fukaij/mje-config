#eval compdef -n _parse_opts sitype
# ZSH function file
# Written by Martin Ebourne
# Part of the SourceInfo package
# Display type information
#
# $Id: sitype,v 1.5 2001/07/31 17:17:01 mebourne Exp $

[[ -z $sourceinfo_typesdb ]] && { echo "sourceinfo_typesdb not set" ; return 1 }

local -a args
args=($argv[*])
local -A opts

local -a dirs

parse_opts args opts - 1 1 <<'EOF' || return 1
sitype [options] <type-name>
  -d <dir>, --directory=<dir>	Prefer files within directory if duplicates found
				(partial name ok, searched in order given)
				# [dirs] = directory | d = string
  -h, --help			Provide this help
				# help | h
  -r, --recurse			Display full type information recursively
				# recurse | r = constant=-r
EOF

# If no -d options then add all the default ones instead
if (( !$#dirs ))
then
  dirs=($sourceinfo_preferred_dirs)
fi

typeInfo.pl --directory=$^dirs $opts[recurse] $sourceinfo_typesdb $argv[1]
