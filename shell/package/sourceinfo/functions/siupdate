# ZSH function file
# Written by Martin Ebourne
# Part of the SourceInfo package
# Update the SourceInfo databases
# Usage: siupdate
#
# $Id: siupdate,v 1.2 2001/02/23 18:04:39 mebourne Exp $

[[ -z $sourceinfo_dirs ]] && { echo "sourceinfo_dirs not set" ; return 1 }
[[ -z $sourceinfo_filesdb ]] && { echo "sourceinfo_filesdb not set" ; return 1 }

local dir
for dir in $sourceinfo_dirs
do
  find $dir \! \( -type d -o -name '*.[ao]' -o -name '*.so' -o -name '*[mM]akefile' \
		  -o -name sol2.d -o -name '.*' \) -print \
		  -o -name lost+found -prune
done |
  gzip - > $sourceinfo_filesdb
