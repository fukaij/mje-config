# ZSH function file
# Update configspec to current time & rebuild the cashsec system
# Usage: updatebuild [clean]
#
# $Id: updatebuild,v 1.1 2001/02/21 11:22:23 mebourne Exp $

local param=$1
local file=${TMPPREFIX:-/tmp/zsh}.configspec.$$
local time=$(date '+%d-%b.%H:%M')

cleartool catcs |
  sed "s/[0-9][0-9]-[A-Z][a-z][a-z].[0-9][0-9]:[0-9][0-9]/$time/g" > $file &&
  cleartool setcs $file &&
  rm -f $file &&
  echo "Updated config spec to $time" &&
  build $param
