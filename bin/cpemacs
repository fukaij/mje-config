#!/bin/sh
#
# cpemacs - Copy emacs files into site-lisp directory and recompile them
# Written by Martin Ebourne, Started 24/08/99
#
# $Id: cpemacs,v 1.3 2000/02/03 17:28:18 martine Exp $

cd /usr/users/martine/config/emacs

filelist=""
for i in *.el
do
  destfile=/opt/emacs/share/emacs/site-lisp/$i
  echo "Installing $destfile"
  cp -fp $i $destfile
  chmod 444 $destfile
  filelist="$filelist \"$destfile\""
done

echo "Running Emacs to byte compile files..."

emacs --batch --eval "(mapcar 'byte-compile-file (list $filelist))"
